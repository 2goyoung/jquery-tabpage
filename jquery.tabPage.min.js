(function(n,t,i){function h(n,u){var f=this,e=n.length;count=0;t(this.tmpl.tabScroll).appendTo(this.container.tab).find("."+r.tabScrollContent).append(n).width(n.length*u+(this.tabMarginH<0?(n.length-1)*this.tabMarginH:n.length*this.tabMarginH));n.animate({width:u+"px"},function(){count++;count==e&&f.adjustTabPosition()});this.tabScrollObj={viewContent:f.container.tab.find("."+r.tabScrollView),scrollContent:f.container.tab.find("."+r.tabScrollContent).css({position:"absolute"}),btnPrev:this.container.tab.find("."+r.tabScrollPrev),btnNext:this.container.tab.find("."+r.tabScrollNext),isTop:!1,isEnd:!1,goTop:function(){this.go(0,300)},goEnd:function(){this.go(this.getEndLeft(),300)},go:function(n,t){if(t===i)var t=300;n==0?(this.btnPrev.addClass("disable"),this.btnNext.removeClass("disable"),this.isTop=!0,this.isEnd=!1):n==this.getEndLeft()?(this.btnPrev.removeClass("disable"),this.btnNext.addClass("disable"),this.isTop=!1,this.isEnd=!0):(this.btnPrev.removeClass("disable"),this.btnNext.removeClass("disable"),this.isTop=!1,this.isEnd=!1);this.scrollContent.stop(!0,!0).animate({left:n+"px"},t)},prev:function(){var t=this.getCurrentLeft(),n=t+u;n>0||n>-u?this.go(0):this.go(n)},next:function(){var i=this.getCurrentLeft(),n=i-u,t=this.getEndLeft();n<t||n-u<t?this.go(t):this.go(n)},getEndLeft:function(){var n=this.viewContent[0].offsetWidth,t=this.scrollContent[0].offsetWidth;return n-t},getCurrentLeft:function(){var n=parseInt(this.scrollContent.css("left"),10);return n?n:0}};this.container.tab.find("."+r.tabScrollPrev).bind("click",function(){f.tabScrollObj.prev()}).bind("mouseenter",function(){t(this).addClass("hover")}).bind("mouseleave",function(){t(this).removeClass("hover")});this.container.tab.find("."+r.tabScrollNext).bind("click",function(){f.tabScrollObj.next()}).bind("mouseenter",function(){t(this).addClass("hover")}).bind("mouseleave",function(){t(this).removeClass("hover")});this.inTabScroll=!0}function c(n,t){this.container.tab.append(n).find("."+r.tabScroll).remove();u&&(f?n.stop().animate({width:t["0"]+"px"}):n.css({width:t["0"]+"px"}));this.tabScrollObj=null;this.inTabScroll=!1}function e(n,i){var r,u;i.type=="iframe"?(r=i.url,typeof i.data!="undefined"&&(r=r.indexOf("?")==-1?r+"?"+t.param(i.data):r+"&"+t.param(i.data)),n.find("iframe").attr("src",r).css("visibility","visible"),i.loaded=!0):i.type=="ajax"?t.ajax({url:r,data:typeof i.data!="undefined"?i.data:"",success:function(t){n.html(t);i.loaded=!0}}):i.type=="html"&&(n.html(i.html),i.loaded=!0);typeof i.fillCallback=="function"&&(u=(i.type="iframe")?i.container.page.find("iframe").contents():i.container.page,i.fillCallback.call(u,i))}function o(n,t){for(var i=n,f=i.length,u=!1,r=f;r--;)if(i[r]==t)return i.splice(r,1),i.unshift(t),u=!0,i;if(!u)return i.unshift(t),i}function y(n,t){for(var i=n,f=i.length,u=!1,r=f;r--;)if(i[r]==t)return i.splice(r,1),u=!0,i;if(!u)return!1}var r={tab:"tab-item",page:"tab-content",pageInner:"tab-content-inner",close:"tab-close",closeHover:"tab-close-hover",tabScroll:"tab-scroll",tabScrollContent:"tab-scroll-content",tabScrollView:"tab-scroll-inner",tabScrollPrev:"tab-arrow-prev",tabScrollNext:"tab-arrow-next"},l=['<{{tag}} id="tab-{{id}}" title="{{title}}" class="',r.tab,' {{class}}">','<div class="tab-wrap">','<div class="tab-inner">','<div class="tab-main">','<span class="text">{{icon}}{{title}}<\/span><span class="text-cover"><\/span>',"<\/div>","{{closeBtn}}","<\/div>","<\/div>","<\/{{tag}}>"].join(""),a='<i class="'+r.close+'"><\/i>',s='<{{tag}} id="page-{{id}}" class="'+r.page+'">{{content}}<\/{{tag}}>',v='<div class="'+r.tabScroll+'"><div class="'+r.tabScrollView+'"><{{tag}} class="'+r.tabScrollContent+'"><\/{{tag}}><\/div><div class="tab-arrow"><i class="'+r.tabScrollPrev+'"><i><\/i><\/i><i class="'+r.tabScrollNext+'"><i><\/i><\/i><\/div><\/div>',p=function(){for(var n=3,t=document.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->",i[0];);return n>4?n:!1}(),f=!0,u=!0;n.TabPage=function(n){var i=this,n=this.options=t.extend({},TabPage.defaults,n);this.index=0;this.tmpl={};this.container={};this.pageList={};this.pageQueue=[];this.activePage=!1;this.showCallback={};this.inTabScroll=!1;this.hideType=n.hideType;this.tmpl.tab=l;this.tmpl.page=this.hideType=="display"?s:s.replace("{{content}}",'<div class="'+r.pageInner+'" style="position:relative;height:100%;">{{content}}<\/div>');this.tmpl.tabScroll=v;this.container.tab=t(n.tabContainer);this.container.page=t(n.pageContainer);this.tagNamePage=!this.tagNamePage&&this.container.page[0].tagName.toLowerCase()=="ul"||this.container.page[0].tagName.toLowerCase=="ol"?"li":"div";this.tagNameTab=!this.tagNameTab&&this.container.tab[0].tagName.toLowerCase()=="ul"||this.container.tab[0].tagName.toLowerCase=="ol"?"li":"div";this.tmpl.tabScroll=this.tmpl.tabScroll.replace(/{{tag}}/g,this.container.tab[0].tagName.toLowerCase());this.tabMarginH="";this.tabWidthInfo=TabPage.prototype.getTabWidthInfo.call(this);this.container.tab.delegate("."+r.tab,"mousedown",function(n){if(t(this).hasClass("tab-active"))return!1;n.which==1&&TabPage.prototype.showPage.call(i,t(this).data("id"))});this.container.tab.delegate("."+r.close,"mousedown",function(){return!1}).delegate("."+r.close,"click",function(){return TabPage.prototype.close.call(i,t(this).parents("."+r.tab).eq(0).data("id")),!1}).delegate("."+r.close,"mouseenter",function(){t(this).addClass(r.closeHover)}).delegate("."+r.close,"mouseleave",function(){t(this).removeClass("tab-close-hover")})};TabPage.prototype.open=function(n){var y,p,k,w,d;if(!TabPage.defaults)return alert("TabPage对象出错"),!1;var n=t.extend({},TabPage.defaults,n),s=this,i={},b="",u;if(n.newWinodw||!s.isExist(n.id)){if(this.options.maxNum!="auto"&&this.pageQueue.length+1>parseInt(this.options.maxNum,10))return!1;n.url||(n.type="html");n.type=="iframe"&&(b='<iframe style="width:100%;visibility:hidden;" frameborder="no" height="100%"  allowTransparency="true" scrolling="yes"><\/iframe>');u=this.getPageById(n.id)?n.id+"-"+this.index:n.id;var c=this.container.tab.find("."+r.tab),v=parseInt(this.options.minWidth,10),l=this.getTabWidthInfo();l["1"]<l["0"]&&(l["1"]<v?(this.inTabScroll||h.call(this,c,v),this.container.tab.find("."+r.tabScrollContent).width((c.length+1)*v+(this.tabMarginH<0?c.length*this.tabMarginH:(c.length+1)*this.tabMarginH)),this.tabScrollObj.goEnd()):f?c.animate({width:l["1"]+"px"},300):c.css({width:l["1"]+"px"}));this.tabWidthInfo=l;this.activePage&&(this.activePage.container.tab.removeClass(n.activeClass),this.hideType=="display"?this.activePage.container.page.hide():(this.activePage.container.page.css({visibility:"hidden",zIndex:"0",textIndent:"-10000px"}),this.activePage.container.page.find("."+r.pageInner).css("left","-10000px")));n.isFixed?(y="tab-fixed",p=""):(y="",p=a);n.icon&&(y=y+" show-icon");k=n.icon?'<i class="tab-icon '+n.icon+'"><\/i>':"";w=this.tmpl.tab.replace("{{id}}",u).replace(/{{title}}/g,n.title).replace("{{class}}",y).replace("{{closeBtn}}",p).replace("{{icon}}",k).replace(/{{tag}}/g,this.tagNameTab);i.tab=this.inTabScroll?t(w).appendTo(this.container.tab.find("."+r.tabScrollContent)):t(w).appendTo(this.container.tab);i.tab.addClass(this.options.activeClass).hide().css({zIndex:n.startIndex+this.index*n.indexDiffer,position:"relative",width:this.tabWidthInfo["1"]<v?v:this.tabWidthInfo["1"]});i.tab.data("id",u);i.id=u;d=this.tmpl.page.replace("{{id}}",u).replace("{{content}}",b).replace(/{{tag}}/g,this.tagNamePage);i.page=t(d).appendTo(this.container.page).css({position:"absolute",height:"100%"});this.pageList[u]=this.activePage={id:u,title:n.title,container:{tab:i.tab,page:i.page},type:n.type,url:n.url,html:n.html,data:n.data,index:this.index++,storage:n.storage,fixed:n.isFixed?!0:!1,loaded:n.lazyLoad?!1:!0,fillCallback:n.fillCallback,showCallback:n.showCallback,closeCallback:n.closeCallback,closeBefore:n.closeBefore};o(this.pageQueue,u);TabPage.openAnimate.call(this,i,function(){n.lazyLoad||e(i.page,s.pageList[u])})}else n.reload?(s.showPage(n.id),e(s.pageList[n.id].container.page,s.pageList[n.id])):s.showPage(n.id)};TabPage.prototype.openPageList=function(n){var i=this;t.isArray(n)&&t.each(n,function(n,t){i.open(t)})};TabPage.prototype.close=function(n,t){var h=typeof n,a,o,e=this,l=!0,t=t===i?!0:t,s;return typeof this.pageList[n].closeBefore=="function"&&(l=this.pageList[n].closeBefore.call(this,this.pageList[n])),l&&(h=="string"||h=="number")?this.pageList[n]?(a=this.pageList[n].index,o=this.pageList[n].container,TabPage.closeAnimate.call(this,o,function(){o.tab.remove();o.page.remove();var t=e.container.tab.find("."+r.tab),i=parseInt(e.options.minWidth,10),n=e.getTabWidthInfo();n["0"]>n["1"]&&(n["0"]>i?e.inTabScroll?c.call(e,t,n):u&&(f?t.animate({width:n["0"]+"px"},300):t.css({width:n["0"]+"px"})):(e.container.tab.find("."+r.tabScrollContent).width(t.length*i+(e.tabMarginH<0?(t.length-2)*e.tabMarginH:(t.length-1)*e.tabMarginH)),e.tabScrollObj.getEndLeft()>e.tabScrollObj.getCurrentLeft()&&e.tabScrollObj.goEnd()));e.tabWidthInfo=n}),t&&typeof this.pageList[n].closeCallback=="function"&&this.pageList[n].closeCallback.call(this,this.pageList[n]),y(this.pageQueue,n),o.tab.hasClass(this.options.activeClass)&&(s=this.pageQueue[0],s&&this.showPage(s,!1)),delete this.pageList[n],!0):!1:!1};TabPage.prototype.closePageList=function(n,f,e){var o=this,s=!1,h;if(u=!1,runClose=!0,arguments.length==2)switch(t.type(f)){case"function":f.call(this,n);break;case"boolean":case"object":runClose=f}else arguments.length==3&&(f.call(this,n),runClose=e===i?!0:e);return t.each(n,function(n,t){runClose[t]?o.close(t):o.close(t,runClose);s=!0}),h=o.getTabWidthInfo(),o.container.tab.find("."+r.tab).stop().animate({width:h["0"]+"px"}),u=!0,s};TabPage.prototype.closeAll=function(n,i){var u=this,f=!1,r=[],n=n,i=i;return t.each(this.pageList,function(n,t){t.fixed||r.push(t.id)}),r.length&&(f=arguments.length==0?u.closePageList(r):u.closePageList(r,n,i)),f};TabPage.prototype.showPage=function(n){var i,u,f;return typeof n!="undefined"&&n!=this.activePage.id?(i=this.getPageById(n),typeof i=="undefined")?!1:(o(this.pageQueue,n),i.container.tab.addClass(this.options.activeClass),this.activePage.container.tab.removeClass(this.options.activeClass),this.hideType=="display"?this.activePage.container.page.hide():(this.activePage.container.page.css({visibility:"hidden",zIndex:"0",textIndent:"-10000px"}),this.activePage.container.page.find("."+r.pageInner).css("left","-10000px")),i.container.page.length?this.hideType=="display"?i.container.page.show():(i.container.page.css({visibility:"visible",zIndex:"100",textIndent:"0px"}),i.container.page.find("."+r.pageInner).css("left","0")):(u=this.tmpl.page.replace("{{id}}",n).replace("{{content}}","").replace(/{{tag}}/g,this.tagName),i.container.page=t(u).appendTo(this.container.page)),this.activePage=i,this.inTabScroll&&this.adjustTabPosition(),i.loaded||e(i.container.page,i),typeof i.showCallback=="function"&&(f=(i.type="iframe")?i.container.page.find("iframe").contents():i.container.page,i.showCallback.call(f,i)),i):!1};TabPage.prototype.getPageById=function(n){return this.pageList[n]};TabPage.prototype.getPageByIndex=function(n){var t;for(var i in this.pageList)if(i.index==n){t=i;break}return t};TabPage.prototype.storage=function(n,r){var u=this.pageList[n].storage;if(arguments.length==1)return u;if(arguments.length==3){if(u===i)return this.pageList[n].storage=r;switch(typeof u){case"string":case"number":this.pageList[n].storage+=r;break;case"object":t.isArray(u)?Array.prototype.push.apply(u,r):t.extend(this.pageList[n].storage,r)}return this.pageList[n].storage}return this.pageList[n].storage=r};TabPage.prototype.isExist=function(n){var i={},r=this.pageList.length;return t.each(this.pageList,function(){i[this.id]=!0}),i[n]?!0:!1};TabPage.prototype.includePage=function(n,u){var e=this,f;if(n===i)return alert("请输入要引入的页面数据"),!1;f={};f.tab=t(n.tab).addClass(r.tab).css({zIndex:e.options.startIndex+this.index*e.options.indexDiffer,position:"relative",width:this.tabWidthInfo["1"]});f.page=t(n.page).addClass(r.page);this.pageList[n.id]=this.activePage={id:n.id,title:n.title,type:n.type?"pageData.type":"html",url:n.url,data:n.data,index:this.index++,container:f,storage:n.storage,fixed:u?!0:!1};f.tab.parents(this.options.tabContainer).length||(f.tab.find("."+r.close).bind("mousedown",function(){return!1}).bind("click",function(){return e.close(t(this).parents("."+r.tab).eq(0).data("id")),!1}).bind("mouseenter",function(){t(this).addClass(r.closeHover)}).bind("mouseleave",function(){t(this).removeClass(r.closeHover)}),f.tab.bind("mousedown",function(n){if(t(this).hasClass("tab-active"))return!1;n.which==1&&e.showPage(t(this).data("id"))}));o(this.pageQueue,n.id);f.tab.data({id:n.id})};TabPage.prototype.getTabWidthInfo=function(){var f=parseInt(this.options.maxWidth,10),e=this.container.tab[0].offsetWidth,o=this.container.tab.find("."+r.tab),u=o.length,c,l,a,v,n,i,s,h;return this.tabMarginH==""&&(u?(n=parseInt(o.eq(0).css("marginLeft"),10),i=parseInt(o.eq(0).css("marginRight"),10),n=this.tabMarginL=n?n:0,i=this.tabMarginR=i?i:0,this.tabMarginH=n+i):(v=this.tmpl.tab.replace("{{id}}","test").replace("{{title}}","test").replace("{{class}}",r.tab).replace("{{closeBtn}}","").replace("{{icon}}","").replace(/{{tag}}/g,this.tagNameTab),testTab=t(v).appendTo(this.container.tab).hide(),n=parseInt(testTab.css("marginLeft"),10),i=parseInt(testTab.css("marginRight"),10),n=this.tabMarginL=n?n:0,i=this.tabMarginR=i?i:0,this.tabMarginH=n+i,testTab.remove())),f+this.tabMarginH,e-=this.tabMarginH<0?this.tabMarginH*(u-1):this.tabMarginH*u,c=u*f>e?e/u:f,s=e+this.tabMarginH,l=(u-1)*f>s?s/(u-1):f,h=e-this.tabMarginH,a=(u+1)*f>h?h/(u+1):f,{"-1":l,"0":c,"1":a}};TabPage.prototype.adjustTabSize=function(){var t=this.getTabWidthInfo(),n;if(this.tabWidthInfo["0"]!=t["0"])if(n=parseInt(this.options.minWidth,10),n=n?n:0,$tabs=this.container.tab.find("."+r.tab),$tabs.is(":animated")&&$tabs.stop(),this.inTabScroll)if(t["0"]>n)c.call(this,$tabs,t);else return this.adjustTabPosition(),!1;else return t["0"]<n?(h.call(this,$tabs,n),!0):($tabs.css("width",t["0"]+"px"),this.tabWidthInfo=t,!0);else return!1};TabPage.prototype.adjustTabPosition=function(){var e,r;if(this.inTabScroll){var u=this.activePage.container.tab,t=this.tabScrollObj.getCurrentLeft(),i=u[0].offsetLeft,o=u[0].offsetWidth,n=this.tabScrollObj,f=n.viewContent[0].offsetWidth,s=n.getEndLeft();return t<s?(n.goEnd(),!0):Math.abs(t)>i?(n.go(-i),!0):(e=f+Math.abs(t),r=i+o,e<r)?(n.go(f-r),!0):!1}return!1};TabPage.openAnimate=function(n,t){var i=this.container.page[0].offsetWidth,r=this.container.page[0].offsetHeight,u=this;ie&&ie<=6?(n.page.css({width:"86%",height:"86%",marginTop:"7%",marginLeft:"7%"}),n.page.animate({width:"100%",height:"100%",marginTop:"0%",marginLeft:"0%"},200,function(){n.tab.css("top","38px").show().animate({top:"0px"},400,function(){t()})})):(n.page.css({top:"14%",right:"14%",bottom:"14%",left:"14%"}),n.page.animate({top:"0%",right:"0%",bottom:"0%",left:"0%"},200,function(){n.tab.css({top:"38px"}).show().animate({top:"0px"},400,function(){t()})}))};TabPage.closeAnimate=function(n,t){t()};TabPage.defaults={type:"iframe",maxWidth:"150",minWidth:"100",maxNum:"auto",newWinodw:!1,showNow:!0,reload:!1,icon:!1,activeClass:"tab-active",startIndex:200,indexDiffer:1,hideType:"visibility"}})(window,jQuery);
/*
//# sourceMappingURL=jquery.tabPage.min.js.map
*/